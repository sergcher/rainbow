{% load widget_tweaks %}
{% with WIDGET_ERROR_CLASS='is-invalid' %}
<form hx-post="{{ request.path }}" hx-headers='{"X-CSRFToken":"{{ csrf_token }}"}' class="modal-content">
    <div class="modal-content">
      <div class="modal-header text-center custom-modal-header">
        <h5 class="modal-title w-100" style="font-size: 14px; color: #FFFFFF; font-family: Segoe UI,serif; font-weight: 400">{{ title }}</h5>
      </div>
        <div class="modal-body">
          <div class="row mb-3">
            <div class="col">
              <label for="{{ repair_form.debt.id_for_label }}" class="form-label">Долг на начало месяца:</label>
                {% render_field repair_form.debt class="form-control" %}
                <div class="invalid-feedback">{{ repair_form.debt.errors|first }}</div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col">
              <label class="form-label" style="font-weight: bold">НАЧИСЛЕНО:</label>
               <b>{{ repair.accrued }}</b>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col">
              <label for="{{ repair_form.fine.id_for_label }}" class="form-label">Пеня:</label>
              {% render_field repair_form.fine class="form-control" %}
              <div class="invalid-feedback">{{ repair_form.fine.errors|first }}</div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col">
              <label for="{{ repair_form.recalculation.id_for_label }}" class="form-label">Перерасчёт:</label>
              {% render_field repair_form.recalculation class="form-control" %}
              <div class="invalid-feedback">{{ repair_form.recalculation.errors|first }}</div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col">
              <label for="{{ repair_form.paid.id_for_label }}" class="form-label">Оплачено:</label>
              {% render_field repair_form.paid class="form-control" %}
              <div class="invalid-feedback">{{ repair_form.paid.errors|first }}</div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col">
              <label class="form-label" style="font-weight: bold">ИТОГО:</label>
              <b>{{ repair.total }}</b>
            </div>
          </div>
            <br>
          <div class="row mb-3">
            <div class="col text-center">
              <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                <a class="btn-segoe" data-bs-dismiss="modal">Отменить</a>
                <a class="btn-segoe-primary" id="saveRepairButton">Сохранить</a>
                <input type="submit" class="d-none" id="submitButtonSaveRepair">
              </div>
            </div>
          </div>
         <div class="form-group" style="display: none;">
              <label for="{{ repair_form.serialNumber.id_for_label }}">{{ repair_form.serialNumber.label }}</label>
              {{ repair_form.serialNumber }}
        </div>
        </div>
    </div>
</form>
{% endwith %}

<script>
  document.getElementById("saveRepairButton").addEventListener("click", function() {
    document.getElementById("submitButtonSaveRepair").click();
  });
</script>
